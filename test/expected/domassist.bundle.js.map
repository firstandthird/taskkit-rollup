{"version":3,"file":"domassist.bundle.js","sources":["../../node_modules/domodule/lib/getParentModule.js","../../node_modules/attrobj/lib/attrobj.js","../../node_modules/domodule/node_modules/aug/index.js","../../node_modules/domodule/node_modules/domassist/lib/isWindow.js","../../node_modules/domodule/node_modules/domassist/lib/find.js","../../node_modules/domodule/node_modules/domassist/lib/on.js","../../node_modules/domodule/node_modules/domassist/lib/findOne.js","../../node_modules/domodule/node_modules/domassist/lib/fire.js","../../node_modules/domodule/node_modules/domassist/lib/scrollableContainer.js","../../node_modules/domodule/lib/domodule.js","../../node_modules/domassist/lib/isWindow.js","../../node_modules/domassist/lib/find.js","../../node_modules/domassist/lib/on.js","../../node_modules/domassist/lib/fire.js","../../node_modules/domassist/lib/scrollableContainer.js","../input/domassist.js"],"sourcesContent":["function findParent(elem) {\n  if (elem.parentNode) {\n    // Accounting for https://bugs.webkit.org/show_bug.cgi?id=161454\n    const dataset = JSON.parse(JSON.stringify(elem.parentNode.dataset));\n\n    if (dataset.module) {\n      return elem.parentNode;\n    }\n\n    return findParent(elem.parentNode);\n  }\n\n  return elem;\n}\n\nexport default findParent;\n","/* global window */\n\nexport default function(key, el) {\n  const values = {};\n\n  Object.keys(el.dataset).forEach(data => {\n    if (data.match(new RegExp(`^${key}`)) && data !== key) {\n      let optionName = data.replace(key, '');\n      let isGlobal = false;\n\n      if (optionName.match(/^Global/)) {\n        optionName = optionName.replace('Global', '');\n        isGlobal = true;\n      }\n\n      optionName = `${optionName[0].toLowerCase()}${optionName.slice(1)}`;\n\n      if (isGlobal) {\n        values[optionName] = window[el.dataset[data]];\n      } else {\n        values[optionName] = el.dataset[data];\n      }\n    }\n  });\n\n  return values;\n}\n","'use strict';\nconst aug = function() {\n  const args = Array.prototype.slice.call(arguments); //eslint-disable-line prefer-rest-params\n  let org = args.shift();\n  let type = '';\n  if (typeof org === 'string' || typeof org === 'boolean') {\n    type = (org === true) ? 'deep' : org;\n    org = args.shift();\n    if (type === 'defaults') {\n      org = aug({}, org); //clone defaults into new object\n      type = 'strict';\n    }\n  }\n  args.forEach((prop) => {\n    for (const propName in prop) { //eslint-disable-line\n      const propValue = prop[propName];\n      // just overwrite arrays:\n      if (Array.isArray(propValue)) {\n        org[propName] = propValue;\n        continue;\n      }\n      if (type === 'deep' && typeof propValue === 'object' && typeof org[propName] !== 'undefined') {\n        if (typeof org[propName] !== 'object') {\n          org[propName] = propValue;\n          continue;\n        }\n        aug(type, org[propName], propValue);\n      } else if (type !== 'strict' || (type === 'strict' && typeof org[propName] !== 'undefined')) {\n        org[propName] = propValue;\n      }\n    }\n  });\n  return org;\n};\nmodule.exports = aug;\n","function isWindow(obj) {\n  return obj != null && obj === obj.window;\n}\n\nexport default isWindow;\n","import isWindow from './isWindow';\n\nfunction find(selector, context = null) {\n  if (selector instanceof HTMLElement || selector instanceof Node || isWindow(selector)) {\n    return [selector];\n  } else if (selector instanceof NodeList) {\n    return [].slice.call(selector);\n  } else if (typeof selector === 'string') {\n    const startElement = (context) ? find(context)[0] : document;\n    return [].slice.call(startElement.querySelectorAll(selector));\n  }\n  return [];\n}\n\nexport default find;\n","import find from './find';\n\nfunction on(selector, event, cb, capture = false) {\n  if (Array.isArray(selector)) {\n    selector.forEach((item) => on(item, event, cb, capture));\n    return;\n  }\n\n  const data = {\n    cb,\n    capture\n  };\n\n  if (!window._domassistevents) {\n    window._domassistevents = {};\n  }\n\n  window._domassistevents[`_${event}`] = data;\n  const el = find(selector);\n  if (el.length) {\n    el.forEach((item) => {\n      item.addEventListener(event, cb, capture);\n    });\n  }\n}\n\nexport default on;\n","import find from './find';\n\nfunction findOne(selector, el) {\n  const found = find(selector, el);\n\n  if (found.length) {\n    return found[0];\n  }\n\n  return null;\n}\n\nexport default findOne;\n","import find from './find';\n\nconst NativeCustomEvent = window.CustomEvent;\n\n//\n// Check for the usage of native support for CustomEvents which is lacking\n// completely on IE.\n//\nfunction canIuseNativeCustom() {\n  try {\n    const p = new NativeCustomEvent('t', {\n      detail: {\n        a: 'b'\n      }\n    });\n    return p.type === 't' && p.detail.a === 'b';\n  } catch (e) {\n    return false;\n  }\n}\n\n// Lousy polyfill for the Custom Event constructor for IE.\nconst IECustomEvent = function CustomEvent(type, params) {\n  const e = document.createEvent('CustomEvent');\n\n  if (params) {\n    e.initCustomEvent(type, params.bubbles, params.cancelable, params.detail);\n  } else {\n    e.initCustomEvent(type, false, false, undefined);\n  }\n\n  return e;\n};\n\nconst DomassistCustomEvent = canIuseNativeCustom() ?\n  NativeCustomEvent : IECustomEvent;\n\nfunction fire(selector, type, params = {}) {\n  if (Array.isArray(selector)) {\n    return selector.forEach(item => fire(item, type, params));\n  }\n\n  const els = find(selector);\n\n  if (els.length) {\n    if (params.bubbles !== false) {\n      params.bubbles = true;\n    }\n\n    els.forEach(el => {\n      const event = new DomassistCustomEvent(type, params);\n      el.dispatchEvent(event);\n    });\n\n    return els;\n  }\n}\n\nexport default fire;\n","let SCROLLABLE_CONTAINER;\n\nfunction getScrollableContainer() {\n  if (SCROLLABLE_CONTAINER) {\n    return SCROLLABLE_CONTAINER;\n  }\n\n  const documentElement = window.document.documentElement;\n  let scrollableContainer;\n\n  documentElement.scrollTop = 1;\n\n  if (documentElement.scrollTop === 1) {\n    documentElement.scrollTop = 0;\n    scrollableContainer = documentElement;\n  } else {\n    scrollableContainer = document.body;\n  }\n\n  SCROLLABLE_CONTAINER = scrollableContainer;\n\n  return scrollableContainer;\n}\n\nSCROLLABLE_CONTAINER = getScrollableContainer();\n\nexport default getScrollableContainer;\n","/* eslint no-new:0 */\nimport parentModule from '../lib/getParentModule';\nimport attrObj from 'attrobj';\nimport aug from 'aug';\nimport { find, findOne, on } from 'domassist';\n\nconst ACTION_SELECTOR = '[data-action]';\nconst DOMAssist = { find, findOne, on };\n\nclass Domodule {\n  constructor(el) {\n    this.log('begin setup');\n    this.el = el;\n    this.els = {};\n    this.options = aug({}, this.defaults, attrObj('module', this.el));\n    this.moduleName = this.el.dataset.module;\n    this.setUps = {\n      actions: [],\n      named: [],\n      options: []\n    };\n    this.boundActionRouter = this.actionRouter.bind(this);\n\n    this.preInit();\n    this.storeRef();\n    this.setupActions();\n    this.setupNamed();\n    this.verifyRequired();\n    this.postInit();\n    this.log('initalized');\n\n    if (Domodule.debug) {\n      this.el.module = this;\n    }\n\n    return this;\n  }\n\n  preInit() {\n  }\n\n  postInit() {\n  }\n\n  get required() {\n    return {};\n  }\n\n  get defaults() {\n    return {};\n  }\n\n  get uuid() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n      const r = Math.random() * 16 | 0;\n      const v = c === 'x' ? r : (r & 0x3 | 0x8);\n      return v.toString(16);\n    });\n  }\n\n  verifyRequired() {\n    if (this.required === {}) {\n      return this;\n    }\n\n    if (typeof this.required.options !== 'undefined') {\n      this.setUps.options = Object.keys(this.options);\n    }\n\n    Object.keys(this.required).forEach((required) => {\n      this.required[required].forEach((value) => {\n        if (this.setUps[required].indexOf(value) < 0) {\n          throw new Error(`${value} is required as ${required} for ${this.moduleName}, but is missing!`);\n        }\n      });\n    });\n\n    return this;\n  }\n\n  setupActions() {\n    this.setupAction(this.el);\n\n    this.find(ACTION_SELECTOR).forEach((action) => {\n      const parent = parentModule(action);\n\n      if (parent === this.el) {\n        this.setupAction(action);\n      }\n    });\n  }\n\n  setupAction(actionEl) {\n    if (actionEl.dataset.domoduleActionProcessed === 'true') {\n      return;\n    }\n\n    const { name: actionName, type: actionType } = Domodule.parseAction(actionEl);\n\n    if (!actionName) {\n      return;\n    } else if (typeof this[actionName] !== 'function') {\n      this.log(`${actionName} was registered, but there is no function set up`);\n      return;\n    }\n\n    this.log(`${actionName} bound`);\n    this.storeSetUp(actionName, 'actions');\n\n    DOMAssist.on(actionEl, actionType, this.boundActionRouter);\n\n    actionEl.dataset.domoduleActionProcessed = 'true';\n  }\n\n  actionRouter(event) {\n    const actionEl = event.currentTarget;\n    const { name: actionName } = Domodule.parseAction(actionEl);\n    const actionData = attrObj('action', actionEl);\n\n    this[actionName].call(\n      this,\n      actionEl,\n      event,\n      actionData\n    );\n  }\n\n  setupNamed() {\n    this.find('[data-name]').forEach((named) => {\n      const parent = parentModule(named);\n\n      if (parent !== this.el) {\n        return;\n      }\n\n      if (!named.dataset.domoduleNameProcessed) {\n        this.els[named.dataset.name] = named;\n\n        this.storeSetUp(named.dataset.name, 'named');\n        named.dataset.domoduleNameProcessed = 'true';\n        named.dataset.domoduleOwner = this.id;\n      }\n    });\n  }\n\n  storeRef() {\n    if (typeof window.domorefs === 'undefined') {\n      window.domorefs = {};\n    }\n\n    if (typeof window.domorefs[this.el.dataset.moduleUid] !== 'undefined') {\n      return false;\n    }\n\n    this.id = this.uuid;\n    this.el.dataset.moduleUid = this.id;\n    window.domorefs[this.el.dataset.moduleUid] = this;\n  }\n\n  find(selector) {\n    return DOMAssist.find(selector, this.el);\n  }\n\n  findOne(selector) {\n    return DOMAssist.findOne(selector, this.el);\n  }\n\n  findByName(name) {\n    return this.els[name];\n  }\n\n  getOption(option) {\n    return this.options[option];\n  }\n\n  storeSetUp(name, dict) {\n    if (this.setUps[dict].indexOf(name) < 0) {\n      this.setUps[dict].push(name);\n    }\n  }\n\n  destroy() {\n    DOMAssist.find(ACTION_SELECTOR, this.el.parentNode).forEach(el => {\n      if (el.dataset.domoduleActionProcessed === 'true') {\n        const { type: actionType } = Domodule.parseAction(el);\n\n        el.removeEventListener(actionType, this.boundActionRouter);\n        el.dataset.domoduleActionProcessed = 'false';\n      }\n    });\n  }\n\n  // static methods can't access `this` so they go last\n  static parseAction(el) {\n    const { action: name, actionType: type = 'click' } = el.dataset;\n    return { name, type };\n  }\n\n  static getInstance(element) {\n    if (element instanceof Node) {\n      return window.domorefs[element.dataset.moduleUid];\n    }\n\n    throw new Error('getInstance expects a dom node');\n  }\n\n  static register(name, cls) {\n    if (typeof name === 'function') {\n      cls = name;\n      name = cls.prototype.constructor.name;\n    }\n\n    if (!window.domodules) {\n      window.domodules = {};\n    }\n\n    Domodule.log(`Registering ${name}`);\n    window.domodules[name] = cls;\n  }\n\n  static discover(el = 'body') {\n    Domodule.log('Discovering modules...');\n\n    if (!window.domodules) {\n      Domodule.log('No modules found');\n      return;\n    }\n\n    let els;\n\n    if (el instanceof Node) {\n      els = [el];\n    } else if (Array.isArray(el)) {\n      els = el;\n    } else {\n      els = DOMAssist.find(el);\n    }\n\n    const instances = [];\n\n    els.forEach(matched => {\n      const foundModules = DOMAssist.find('[data-module]', matched);\n\n      foundModules.forEach((moduleEl) => {\n        const moduleName = moduleEl.dataset.module;\n\n        if (moduleName && typeof window.domodules[moduleName] === 'function') {\n          if (typeof window.domorefs === 'object' && typeof window.domorefs[moduleEl.dataset.moduleUid] !== 'undefined') {\n            return;\n          }\n\n          Domodule.log(`${moduleName} found`);\n          instances.push(new window.domodules[moduleName](moduleEl));\n        }\n      });\n    });\n\n    return instances;\n  }\n\n  //used inside instance\n  log(msg) {\n    Domodule.log(`${this.constructor.name}: ${msg}`);\n  }\n\n  static log(msg) {\n    if (Domodule.debug) {\n      console.log(`[DOMODULE] ${msg}`); //eslint-disable-line no-console\n    }\n  }\n}\nDomodule.debug = (typeof window.localStorage === 'object' && window.localStorage.getItem('DomoduleDebug'));\n\nDomodule.autoDiscover = true;\nwindow.addEventListener('DOMContentLoaded', () => {\n  if (Domodule.autoDiscover) {\n    Domodule.discover();\n  }\n});\n\nexport default Domodule;\n","function isWindow(obj) {\n  return obj != null && obj === obj.window;\n}\n\nexport default isWindow;\n","import isWindow from './isWindow';\n\nfunction find(selector, context = null) {\n  if (selector instanceof HTMLElement || selector instanceof Node || isWindow(selector)) {\n    return [selector];\n  } else if (selector instanceof NodeList) {\n    return [].slice.call(selector);\n  } else if (typeof selector === 'string') {\n    const startElement = (context) ? find(context)[0] : document;\n    return [].slice.call(startElement.querySelectorAll(selector));\n  }\n  return [];\n}\n\nexport default find;\n","import find from './find';\n\nfunction on(selector, event, cb, capture = false) {\n  if (Array.isArray(selector)) {\n    selector.forEach((item) => on(item, event, cb, capture));\n    return;\n  }\n\n  const data = {\n    cb,\n    capture\n  };\n\n  if (!window._domassistevents) {\n    window._domassistevents = {};\n  }\n\n  window._domassistevents[`_${event}`] = data;\n  const el = find(selector);\n  if (el.length) {\n    el.forEach((item) => {\n      item.addEventListener(event, cb, capture);\n    });\n  }\n}\n\nexport default on;\n","import find from './find';\n\nconst NativeCustomEvent = window.CustomEvent;\n\n//\n// Check for the usage of native support for CustomEvents which is lacking\n// completely on IE.\n//\nfunction canIuseNativeCustom() {\n  try {\n    const p = new NativeCustomEvent('t', {\n      detail: {\n        a: 'b'\n      }\n    });\n    return p.type === 't' && p.detail.a === 'b';\n  } catch (e) {\n    return false;\n  }\n}\n\n// Lousy polyfill for the Custom Event constructor for IE.\nconst IECustomEvent = function CustomEvent(type, params) {\n  const e = document.createEvent('CustomEvent');\n\n  if (params) {\n    e.initCustomEvent(type, params.bubbles, params.cancelable, params.detail);\n  } else {\n    e.initCustomEvent(type, false, false, undefined);\n  }\n\n  return e;\n};\n\nconst DomassistCustomEvent = canIuseNativeCustom() ?\n  NativeCustomEvent : IECustomEvent;\n\nfunction fire(selector, type, params = {}) {\n  if (Array.isArray(selector)) {\n    return selector.forEach(item => fire(item, type, params));\n  }\n\n  const els = find(selector);\n\n  if (els.length) {\n    if (params.bubbles !== false) {\n      params.bubbles = true;\n    }\n\n    els.forEach(el => {\n      const event = new DomassistCustomEvent(type, params);\n      el.dispatchEvent(event);\n    });\n\n    return els;\n  }\n}\n\nexport default fire;\n","let SCROLLABLE_CONTAINER;\n\nfunction getScrollableContainer() {\n  if (SCROLLABLE_CONTAINER) {\n    return SCROLLABLE_CONTAINER;\n  }\n\n  const documentElement = window.document.documentElement;\n  let scrollableContainer;\n\n  documentElement.scrollTop = 1;\n\n  if (documentElement.scrollTop === 1) {\n    documentElement.scrollTop = 0;\n    scrollableContainer = documentElement;\n  } else {\n    scrollableContainer = document.body;\n  }\n\n  SCROLLABLE_CONTAINER = scrollableContainer;\n\n  return scrollableContainer;\n}\n\nSCROLLABLE_CONTAINER = getScrollableContainer();\n\nexport default getScrollableContainer;\n","import Domodule from 'domodule';\nimport { find, fire, on } from 'domassist';\n\nclass Reload extends Domodule {\n  postInit() {\n    on(this.el, 'click', this.onClick.bind(this));\n  }\n\n  onClick(event) {\n    event.preventDefault();\n    fire(this.el, 'tessst', { bubbles: true });\n  }\n}\n\nDomodule.register('Reload', Reload);\n\nclass Test {\n  constructor() {\n    console.log('test');\n  }\n\n  type() {\n    console.log(typeof find);\n  }\n}\n\nclass Do extends Test {\n  constructor() {\n    super();\n\n    this.echo();\n  }\n\n  echo(message = 'something') {\n    console.log(message);\n  }\n}\n\nconst matrix = ['a', 'b', 'c'];\nconst [first] = matrix;\nconst obj = { first };\nconst f = () => obj;\n\nfunction foo(...args) {\n  const { a } = f();\n  console.log(args);\n\n  return a;\n}\n\nconsole.log(foo(matrix, Test));\n\nexport default Do;\n"],"names":["findParent","elem","parentNode","dataset","JSON","parse","stringify","module","key","el","values","Object","keys","forEach","data","match","RegExp","optionName","replace","isGlobal","toLowerCase","slice","window","aug","args","Array","prototype","call","arguments","org","shift","type","prop","propName","propValue","isArray","isWindow","obj","find","selector","context","HTMLElement","Node","NodeList","startElement","document","querySelectorAll","on","event","cb","capture","item","_domassistevents","length","addEventListener","findOne","found","NativeCustomEvent","CustomEvent","canIuseNativeCustom","p","detail","a","e","IECustomEvent","params","createEvent","initCustomEvent","bubbles","cancelable","undefined","DomassistCustomEvent","SCROLLABLE_CONTAINER","getScrollableContainer","documentElement","scrollableContainer","scrollTop","body","ACTION_SELECTOR","DOMAssist","Domodule","log","els","options","defaults","attrObj","moduleName","setUps","actions","named","boundActionRouter","actionRouter","bind","preInit","storeRef","setupActions","setupNamed","verifyRequired","postInit","debug","required","value","indexOf","Error","setupAction","action","parent","parentModule","actionEl","domoduleActionProcessed","parseAction","actionName","name","actionType","storeSetUp","currentTarget","actionData","domoduleNameProcessed","domoduleOwner","id","domorefs","moduleUid","uuid","findByName","getOption","option","dict","push","destroy","removeEventListener","getInstance","element","register","cls","constructor","domodules","discover","instances","matched","foundModules","moduleEl","msg","console","c","r","Math","random","v","toString","localStorage","getItem","autoDiscover","fire","dispatchEvent","Reload","onClick","preventDefault","Test","Do","echo","message","matrix","first","f","foo"],"mappings":"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"}